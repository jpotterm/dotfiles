<?
if not data.name then
  data = {
    name = "4hero",
    image = "hxttp://chachatelier.fr/programmation/images/mozodojo-original-image.jpg",
    years = {{"156|1234","spotify:search:123"}},
    genres = {"hej"},
    top_hits = {"asdasd"},
    artists = {
      {
        name = "Jazzanova",
        uri = "spotify:search:bajs",
        image = "hxttp://chachatelier.fr/programmation/images/mozodojo-original-image.jpg",
        years = {"asd"},
        genres = {"123"}
      },
      {
        name = "Jazzanova",
        uri = "spotify:search:bajs",
        image = "hxttp://chachatelier.fr/programmation/images/mozodojo-original-image.jpg",
        years = {"asd"},
        genres = {"123"}
      }
    }
  }
end

function printlinks(arg)
  for i, s in ipairs(arg) do
    if type(s) == "table" then text, link = s[1],s[2] else text, link = s, "" end
    ?><link url="${link}">${text}<?if i ~= #arg then print(",") end ?></link> <?
  end
end
?>
  <document>

<style>
  bigArtistImage { height: 220; width: fit-content; imagemode: aspect; shadow:1 }
  smallArtistImage { height: 60; width: 60; imagemode: cutout; shadow:1 }
  headerText { size:14; color:#fff; bold:1 }
  infoText { size:11; color:#fff; link-color:#a0a0a0 }
  smallArtistName { size:13; color:#fff; face:arial }
  smallArtistYear { size:11; color:#777; face:arial }
  smallArtistGenre { size:9; color:#a0a0a0; face:arial }
</style>
  
  
<scrollview bgcolor="#373737">
  <hbox>
    <vbox id="left_column" maxWidth="300" margin="10,10,10,10">
      <img src="${data.image}" alt="PlaceholderArtist|300" style="bigArtistImage"/>
      <text style="infoText" flex="1"
>

@{sInfoActiveYears} <?printlinks(data.years)?>
        
        
@{sInfoGenres} <?printlinks(data.genres)?>
        

@{sInfoTopHits} <?printlinks(data.top_hits)?>
      </text>
    </vbox>
    <vbox id="right_column" margin="10,10,10,10">
      <text style="headerText">${data.name}@{sInfoRadioFeaturing}</text>
      % for i, a in ipairs(data.artists) do
        <hbox margin="0,10,0,0">
          <link url="${a.uri}"><img src="${a.image}" alt="PlaceholderArtist|60" style="smallArtistImage"/></link>
          <vbox margin="10,0,0,0">
            <text style="smallArtistName" flex="1" margin="0,5,0,0"><link url="${a.uri}">${a.name}</link></text>
            <text style="smallArtistYear" flex="1" margin="0,2,0,0"><?printlinks(a.years)?></text>
            <text style="smallArtistGenre" flex="1" margin="0,3,0,0"><?printlinks(a.genres)?></text>
          </vbox>
        </hbox>
      % end
    </vbox>
  </hbox>
</scrollview>
</document>